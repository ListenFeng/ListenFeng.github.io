(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d14215e"],{"0aef":function(e,t,a){},"114e":function(e,t,a){"use strict";a("b9f5")},2882:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rolesControl"},[a("el-card",[a("el-button",{attrs:{type:"primary"},on:{click:e.addRolesTab}},[e._v("添加权限")]),a("el-table",{staticClass:"mtop30",staticStyle:{width:"100%"},attrs:{data:e.rolesTab,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"key",label:"身份"}}),a("el-table-column",{attrs:{prop:"description",label:"说明"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.editRoles(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"warning",disabled:e.isAdmin(t.row)},on:{click:function(a){return e.deleteRoles(t.$index)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{staticClass:"diaForm",attrs:{title:"权限编辑",visible:e.diaIsShow},on:{"update:visible":function(t){e.diaIsShow=t}}},[a("el-form",{ref:"rolesForm",attrs:{model:e.formData,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"身份",prop:"key"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入要添加的身份类别"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1),a("el-form-item",{attrs:{label:"说明",prop:"description"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入相关说明"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",{attrs:{label:"菜单"}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,"node-key":"name",props:e.defaultProps,"show-checkbox":"","check-strictly":!1}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeRoles("rolesForm",e.editType)}}},[e._v("确认")]),a("el-button",{on:{click:function(t){e.diaIsShow=!1}}},[e._v("取消")])],1)],1)],1)],1)},i=[],n=a("5530"),s=a("b85c"),o=a("2909"),l=(a("99af"),a("a434"),a("a4d3"),a("e01a"),a("b0c0"),a("4de4"),a("caad"),a("2532"),a("a18c")),c={data:function(){return{rolesTab:[],diaIsShow:!1,formData:{},editType:"update",rules:{key:[{required:!0,message:"请输入要添加的身份类别",trigger:"blur"}],description:[{required:!0,message:"请输入相关说明",trigger:"blur"}]},editIndex:0,allRoute:[].concat(Object(o["a"])(l["c"]),Object(o["a"])(l["a"])),treeData:[],defaultProps:{label:"label",children:"children"}}},created:function(){this._getAllRolse(),this.treeData=this.getTreeData(this.allRoute)},methods:{_getAllRolse:function(){},isAdmin:function(e){return"admin"===e.key||"user"===e.key},deleteRoles:function(e){var t=this;this.$confirm("此操作将永久删除相关数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.rolesTab.splice(e,1),t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addRolesTab:function(){var e=this;this.diaIsShow=!0,this.editType="add",this.formData={},this.$nextTick((function(){e.$refs.rolesForm.clearValidate(),e.$refs.tree.setCheckedKeys([])}))},editRoles:function(e,t){var a=this;this.diaIsShow=!0,this.editIndex=e,this.editType="update",this.formData=Object.assign({},this.formData,{key:t.key,description:t.description}),this.$nextTick((function(){a.$refs.rolesForm.clearValidate(),a.$refs.tree.setCheckedKeys(t.pages)}))},changeRoles:function(e,t){var a=this;this.$refs[e].validate((function(e){if(e){var r=a.$refs.tree.getCheckedKeys();if("update"===t){var i=a.editIndex;a.rolesTab[i].key=a.formData.key,a.rolesTab[i].description=a.formData.description,a.rolesTab[i].pages=r,a.$notify({title:"成功",message:"权限修改成功",type:"success"})}else if("add"===t){var n={};n.key=a.formData.key,n.description=a.formData.description,n.pages=r,a.rolesTab.push(n),a.$notify({title:"成功",message:"权限添加成功",type:"success"})}a.diaIsShow=!1}}))},getTreeData:function(e){var t,a=[],r=Object(s["a"])(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!i.hidden){var n=this.hasOnlyChild(i.children,i);n&&!n.children&&(i=n);var o={label:i.meta.title,name:i.name};i.children&&(o.children=this.getTreeData(i.children)),a.push(o)}}}catch(l){r.e(l)}finally{r.f()}return a},hasOnlyChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=e.filter((function(e){return!e.hidden}));return 1!==a.length||t.meta?0===a.length&&t:a[0]},forSearchArr:function(e,t){var a,r=[],i=Object(s["a"])(e);try{for(i.s();!(a=i.n()).done;){var o=a.value,l=Object(n["a"])({},o);t.includes(l.name)&&(l.children&&(l.children=this.forSearchArr(l.children,t)),r.push(l))}}catch(c){i.e(c)}finally{i.f()}return r}}},d=c,f=(a("114e"),a("f8b8"),a("2877")),u=Object(f["a"])(d,r,i,!1,null,"328b10a2",null);t["default"]=u.exports},a434:function(e,t,a){"use strict";var r=a("23e7"),i=a("23cb"),n=a("a691"),s=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),f=d("splice"),u=Math.max,h=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var a,r,d,f,b,y,g=o(this),k=s(g.length),v=i(e,k),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=k-v):(a=w-2,r=h(u(n(t),0),k-v)),k+a-r>p)throw TypeError(m);for(d=l(g,r),f=0;f<r;f++)b=v+f,b in g&&c(d,f,g[b]);if(d.length=r,a<r){for(f=v;f<k-r;f++)b=f+r,y=f+a,b in g?g[y]=g[b]:delete g[y];for(f=k;f>k-r+a;f--)delete g[f-1]}else if(a>r)for(f=k-r;f>v;f--)b=f+r-1,y=f+a-1,b in g?g[y]=g[b]:delete g[y];for(f=0;f<a;f++)g[f+v]=arguments[f+2];return g.length=k-r+a,d}})},b9f5:function(e,t,a){},f8b8:function(e,t,a){"use strict";a("0aef")}}]);
//# sourceMappingURL=chunk-7d14215e.92480e69.js.map